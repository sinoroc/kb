
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>tox &#8212; Sinoroc KB</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="pex" href="pex.html" />
    <link rel="prev" title="pytest" href="pytest.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="tox">
<h1>tox<a class="headerlink" href="#tox" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id4">Introduction</a></p></li>
<li><p><a class="reference internal" href="#defaults" id="id5">Defaults</a></p></li>
<li><p><a class="reference internal" href="#development-environment" id="id6">Development environment</a></p></li>
<li><p><a class="reference internal" href="#notes" id="id7">Notes</a></p>
<ul>
<li><p><a class="reference internal" href="#gitlab-ci" id="id8">GitLab CI</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">tox</span></code> tool allows to easily create multiple Python virtual environments
while specifying a list of Python dependencies to install in each environment
as well as a list of commands to run in each environment.</p>
<p>The original purpose of the tool is to test the source distribution (<code class="docutils literal notranslate"><span class="pre">sdist</span></code>)
of a Python project against multiple combinations of Python interpreters and
Python dependencies.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://tox.readthedocs.io/">https://tox.readthedocs.io/</a></p></li>
</ul>
</section>
<section id="defaults">
<h2>Defaults<a class="headerlink" href="#defaults" title="Permalink to this heading">¶</a></h2>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">tox.ini</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[tox]</span>
<span class="na">envlist</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">py37</span>
<span class="w">    </span><span class="na">py38</span>
<span class="na">isolated_build</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>
<span class="c1"># ...</span>

<span class="k">[testenv]</span>
<span class="na">commands</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">python3 -m pytest</span>
<span class="na">extras</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">dev_test</span>
<span class="c1"># ...</span>
</pre></div>
</div>
</div>
</section>
<section id="development-environment">
<h2>Development environment<a class="headerlink" href="#development-environment" title="Permalink to this heading">¶</a></h2>
<p>It is a good idea to setup an environment for interactive use. The purpose of
this environment is to be actually activated from the interactive shell in
order to do the actual development.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">commands</span></code> configuration setting should be relatively neutral.
It can also be left empty.
There is no need to trigger any test suite or linting, since those should be triggered manually once the environment is active.</p>
<p>The environment should contain the dependencies for all use cases: test, build,
distribute, and then eventually some more to develop.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">tox.ini</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># ...</span>
<span class="k">[testenv:develop]</span>
<span class="na">commands</span><span class="w"> </span><span class="o">=</span>
<span class="na">deps</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">dev_doc</span>
<span class="w">    </span><span class="na">dev_lint</span>
<span class="w">    </span><span class="na">dev_package</span>
<span class="w">    </span><span class="na">dev_test</span>
<span class="na">usedevelop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>
<span class="c1"># ...</span>
</pre></div>
</div>
</div>
</section>
<section id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this heading">¶</a></h2>
<section id="gitlab-ci">
<h3>GitLab CI<a class="headerlink" href="#gitlab-ci" title="Permalink to this heading">¶</a></h3>
<p>Automatically set the <code class="docutils literal notranslate"><span class="pre">TOXENV</span></code> environment variable based on the job name:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">.gitlab-ci.yml</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="s">&#39;.review&#39;</span><span class="p p-Indicator">:</span>
<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;export</span><span class="nv"> </span><span class="s">TOXENV=&quot;${CI_JOB_NAME##review}&quot;&#39;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;python3</span><span class="nv"> </span><span class="s">-m</span><span class="nv"> </span><span class="s">pip</span><span class="nv"> </span><span class="s">install</span><span class="nv"> </span><span class="s">tox&#39;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;python3</span><span class="nv"> </span><span class="s">-m</span><span class="nv"> </span><span class="s">tox&#39;</span>

<span class="s">&#39;review</span><span class="nv"> </span><span class="s">py37&#39;</span><span class="p p-Indicator">:</span>
<span class="w">  </span><span class="nt">extends</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;.review&#39;</span>
<span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;python:3.7&#39;</span>

<span class="s">&#39;review</span><span class="nv"> </span><span class="s">py38&#39;</span><span class="p p-Indicator">:</span>
<span class="w">  </span><span class="nt">extends</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;.review&#39;</span>
<span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;python:3.8&#39;</span>
</pre></div>
</div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">


<h1 class="logo">
 <a href="../index.html">
  Sinoroc KB
 </a>
</h1>
<p class="blurb">
 Bits of knowledge
</p>



<h3><a href="../contents.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Foreword</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="package_data.html">Python package data</a></li>
<li class="toctree-l2"><a class="reference internal" href="packaging.html">Python packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="project_version.html">Python project version single-sourcing</a></li>
<li class="toctree-l2"><a class="reference internal" href="project_name.html">Python project name</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_imports.html">Python imports</a></li>
<li class="toctree-l2"><a class="reference internal" href="pytest.html">pytest</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">tox</a></li>
<li class="toctree-l2"><a class="reference internal" href="pex.html">pex</a></li>
<li class="toctree-l2"><a class="reference internal" href="setuptools.html">setuptools</a></li>
<li class="toctree-l2"><a class="reference internal" href="chameleon.html">Chameleon</a></li>
<li class="toctree-l2"><a class="reference internal" href="working.html">Working with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="fizz_buzz.html">Fizz buzz</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../docker/index.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/index.html">Miscellaneous</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index.html">Appendix</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      
      
      
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/python/tox.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>