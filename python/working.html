
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Working with Python &#8212; Sinoroc KB</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Fizz buzz" href="fizz_buzz.html" />
    <link rel="prev" title="Chameleon" href="chameleon.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="working-with-python">
<h1>Working with Python<a class="headerlink" href="#working-with-python" title="Permalink to this heading">¶</a></h1>
<section id="no-pip">
<h2>No <em>pip</em><a class="headerlink" href="#no-pip" title="Permalink to this heading">¶</a></h2>
<p>Do not install a global system-wide version of <em>pip</em> at all.</p>
<p>There is almost never a good reason to install global system-wide packages via
<em>pip</em> to begin with. Especially on Linux where the default version of Python
is part of the system and used by the system. So mixing this with Python
projects that the user install install themselves via <em>pip</em> is very likely to
cause conflicts sooner rather than later.</p>
</section>
<section id="use-isolation">
<h2>Use isolation<a class="headerlink" href="#use-isolation" title="Permalink to this heading">¶</a></h2>
<p>If Python tools are needed to be always available from the command line, then
isolate them with <em>zapp</em>, <em>shiv</em>, or <em>pex</em>.</p>
<ul class="simple">
<li><p><em>zapp</em> <a class="reference external" href="https://pypi.org/project/zapp/">https://pypi.org/project/zapp/</a></p></li>
<li><p><em>shiv</em> <a class="reference external" href="https://pypi.org/project/shiv/">https://pypi.org/project/shiv/</a></p></li>
<li><p><em>pex</em> <a class="reference external" href="https://pypi.org/project/pex/">https://pypi.org/project/pex/</a></p></li>
</ul>
<p>Those are all <em>zipapp</em> single-file Python executables.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.python.org/dev/peps/pep-0441/">https://www.python.org/dev/peps/pep-0441/</a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/zipapp.html">https://docs.python.org/3/library/zipapp.html</a></p></li>
</ul>
<p><em>shiv</em> and <em>pex</em> applications are self extractable. <em>zapp</em> does not need to be
extracted. The code is executed directly from within the zip-compressed
archive.</p>
<p><em>pex</em> applications are executed from their own virtual environment. <em>zapp</em>
applications are not executed in a virtual environment. Not sure about <em>shiv</em>.</p>
<p><em>shiv</em> applications show up somehow in the current environment. Whereas <em>zapp</em>
applications do not, so they are perfect for tools such as <em>deptree</em>, and
<em>pipdeptree</em>.</p>
</section>
<section id="use-toolmaker">
<h2>Use <em>toolmaker</em><a class="headerlink" href="#use-toolmaker" title="Permalink to this heading">¶</a></h2>
<p>To automate the creation of single file Python applications with <em>zapp</em>,
<em>shiv</em>, or <em>pex</em>, one can use <em>toolmaker</em>.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://pypi.org/project/toolmaker/">https://pypi.org/project/toolmaker/</a></p></li>
</ul>
</section>
<section id="use-venv">
<h2>Use <em>venv</em><a class="headerlink" href="#use-venv" title="Permalink to this heading">¶</a></h2>
<p>Python 3 has the module <em>venv</em> in its standard library since version 3.3.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/venv.html">https://docs.python.org/3/library/venv.html</a></p></li>
</ul>
<p>So the need for the third party library <em>virtualenv</em> is much less pressing.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 -m venv .venv
$ . .venv/bin/activate
</pre></div>
</div>
</section>
<section id="do-not-activate-virtual-environments">
<h2>Do not activate virtual environments<a class="headerlink" href="#do-not-activate-virtual-environments" title="Permalink to this heading">¶</a></h2>
<p>The scripts that are installed in a virtual environment (with <em>setuptools</em> at
least) get a shebang with the full path to the Python interpeter from the
virtual environment. So there is no need to activate the virtual environment
to call such scripts.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ .venv/bin/myscript
$ .venv/bin/python3 -m mymodule
</pre></div>
</div>
</section>
<section id="interactive-debug">
<h2>Interactive debug<a class="headerlink" href="#interactive-debug" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#breakpoint">https://docs.python.org/3/library/functions.html#breakpoint</a></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">breakpoint</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/using/cmdline.html#cmdoption-i">https://docs.python.org/3/using/cmdline.html#cmdoption-i</a></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">i</span> <span class="n">main</span><span class="o">.</span><span class="n">py</span>

<span class="n">python</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span><span class="n">m</span> <span class="n">something</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="https://stackoverflow.com/a/1396386/11138259">https://stackoverflow.com/a/1396386/11138259</a></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pdb</span><span class="p">;</span> <span class="n">pdb</span><span class="o">.</span><span class="n">set_trace</span><span class="p">()</span>
</pre></div>
</div>
<p>Then:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/pdb.html#pdbcommand-interact">https://docs.python.org/3/library/pdb.html#pdbcommand-interact</a></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">Pdb</span><span class="p">)</span> <span class="n">interact</span>
<span class="o">*</span><span class="n">interactive</span><span class="o">*</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Or:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/code.html#code.interact">https://docs.python.org/3/library/code.html#code.interact</a></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">code</span><span class="p">;</span> <span class="n">code</span><span class="o">.</span><span class="n">interact</span><span class="p">(</span><span class="n">local</span><span class="o">=</span><span class="nb">locals</span><span class="p">())</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">


<h1 class="logo">
 <a href="../index.html">
  Sinoroc KB
 </a>
</h1>
<p class="blurb">
 Bits of knowledge
</p>



<h3><a href="../contents.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Foreword</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="package_data.html">Python package data</a></li>
<li class="toctree-l2"><a class="reference internal" href="packaging.html">Python packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="project_version.html">Python project version single-sourcing</a></li>
<li class="toctree-l2"><a class="reference internal" href="project_name.html">Python project name</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_imports.html">Python imports</a></li>
<li class="toctree-l2"><a class="reference internal" href="pytest.html">pytest</a></li>
<li class="toctree-l2"><a class="reference internal" href="tox.html">tox</a></li>
<li class="toctree-l2"><a class="reference internal" href="pex.html">pex</a></li>
<li class="toctree-l2"><a class="reference internal" href="setuptools.html">setuptools</a></li>
<li class="toctree-l2"><a class="reference internal" href="chameleon.html">Chameleon</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Working with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="fizz_buzz.html">Fizz buzz</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../docker/index.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/index.html">Miscellaneous</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index.html">Appendix</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      
      
      
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/python/working.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>